From b93d96b78ac5250135975df892cee793dc3c0797 Mon Sep 17 00:00:00 2001
From: "Thomas E. Dickey" <dickey@invisible-island.net>
Date: Sat, 14 Apr 2018 22:50:05 +0000
Subject: [PATCH] ncurses 6.1 - patch 20180414

+ add a null-pointer check in _nc_parse_entry to handle an error when
  a use-name is invalid syntax (report by Chung-Yi Lin).

diff --git a/ncurses/tinfo/parse_entry.c b/ncurses/tinfo/parse_entry.c
index ddbc252..fbf6fc4 100644
--- a/ncurses/tinfo/parse_entry.c
+++ b/ncurses/tinfo/parse_entry.c
@@ -494,9 +494,11 @@ _nc_parse_entry(struct entry *entryp, int literal, bool silent)
 		 * Otherwise, look for a base entry that will already
 		 * have picked up defaults via translation.
 		 */
-		for (i = 0; i < entryp->nuses; i++)
-		    if (!strchr((char *) entryp->uses[i].name, '+'))
+		for (i = 0; i < entryp->nuses; i++) {
+		    if (entryp->uses[i].name != 0
+			&& !strchr((char *) entryp->uses[i].name, '+'))
 			has_base_entry = TRUE;
+		}
 
 	    postprocess_termcap(&entryp->tterm, has_base_entry);
 	} else
